n1 = 1; % index of refraction of a vacuum
numR = 4; % Number of reflections

[theta_1, theta_2, P] = DegreeOfPolarization(n1, n2, numR);

n_idx = 1.1:0.01:2.0;
angles = zeros(1,length(n_idx
for i=1:length(n_idx)
    n2 = n_idx(i); % index of refraction of the coumpound of interest
    [theta_1, theta_2, P] = DegreeOfPolarization(n1, n2, numR);
    n = length(P);
    for i=1:n
        if abs(P(i)-0.05)<0.0001
            P(i)
            max_angle = theta_1(i)*180/pi;
            break
        end
    end
    
end

n = length(P);
for i=1:n
    if abs(P(i)-0.05)<0.0001
        P(i)
        max_angle = theta_1(i)*180/pi;
        break
    end
end

n_idx = [1.40, 1.43, 1.46, 1.49, 1.52, 1.55];
theta_max = [5.351, 5.409, 5.460, 5.518, 5.575, 5.626];

figure(2)
plot(n_idx, theta_max)
title('Maximum Angle with respect to Index of Refraction')
xlabel('Index of Refraction')
ylabel('Maximum Angle (degrees)')
